
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Indische Sprüche - Digital Workspace</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
  <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet" />

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('Service Worker registered:', reg.scope))
          .catch(err => console.error('Service Worker registration failed:', err));
      });
    }
  </script>

  <script>
    const iastToDevanagariMap = {
      "ai":"ऐ","au":"औ","ā":"आ","a":"अ","ī":"ई","i":"इ","ū":"ऊ","u":"उ","ṛ":"ऋ","ṝ":"ॠ","ḷ":"ऌ","ḹ":"ॡ",
      "e":"ए","o":"ओ","k":"क","kh":"ख","g":"ग","gh":"घ","ṅ":"ङ","c":"च","ch":"छ","j":"ज","jh":"झ","ñ":"ञ",
      "ṭ":"ट","ṭh":"ठ","ḍ":"ड","ḍh":"ढ","ṇ":"ण","t":"त","th":"थ","d":"द","dh":"ध","n":"न",
      "p":"प","ph":"फ","b":"ब","bh":"भ","m":"म","y":"य","r":"र","l":"ल","v":"व",
      "ś":"श","ṣ":"ष","s":"स","h":"ह","ṃ":"ं","ḥ":"ः","'":"ऽ",".":"।",",":","," ":" "
    };

    function transliterateIAST(input) {
      const sortedKeys = Object.keys(iastToDevanagariMap).sort((a, b) => b.length - a.length);
      let output = '';
      let i = 0;
      while (i < input.length) {
        let matched = false;
        for (let key of sortedKeys) {
          if (input.substring(i, i + key.length) === key) {
            output += iastToDevanagariMap[key];
            i += key.length;
            matched = true;
            break;
          }
        }
        if (!matched) {
          output += input[i];
          i++;
        }
      }
      return output;
    }

    document.addEventListener('DOMContentLoaded', function () {
      const romanInput = document.getElementById('romanText');
      const devInput = document.getElementById('devanagariText');
      if (romanInput && devInput) {
        romanInput.addEventListener('input', function () {
          const iast = romanInput.value.toLowerCase();
          const devText = transliterateIAST(iast);
          devInput.value = devText;
        });
      }
    });
  </script>
</head>
<body>
  <div style="padding: 20px; font-family: Georgia, serif;">
    <h1>इन्दिश्च स्प्रूछे / Indische Sprüche</h1>
    <p>Enter text in IAST below. It will automatically convert to Devanagari:</p>

    <div>
      <label for="romanText"><strong>IAST Input:</strong></label><br />
      <textarea id="romanText" rows="3" style="width:100%; font-size:1.2em;"></textarea>
    </div>
    <br />
    <div>
      <label for="devanagariText"><strong>Devanāgarī Output:</strong></label><br />
      <textarea id="devanagariText" rows="3" style="width:100%; font-family: 'Noto Sans Devanagari', sans-serif; font-size:1.4em;"></textarea>
    </div>
  </div>
</body>
</html>
